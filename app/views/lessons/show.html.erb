<% provide(:title, @lesson.category.name)%>
  <h3><%=@lesson.category.name%></h3>             
    <%= form_for(@lesson, method: :put) do |f| %>             
      <%num_learned_word=0%>
      <%=f.fields_for :lesson_words do |f2|%>
        <%lesson_word=f2.object%>                    
        <%num_learned_word+=1%>
        <div id="word-<%=num_learned_word%>">
          <p>
            <i>
              You have learned <%= num_learned_word %> / <%=@lesson.lesson_words.count%> words      
            </i>
          </p>                  
          <div class="row">
            <div class="col-md-5 col-md-offset-3">
              <div class = "col-sm-10">                                    
                  <center><h1><%=lesson_word.word.content %></h1></center>
                  <%lesson_word.word.word_answers.each do |word_answer|%>              
                    <%=f2.radio_button :word_answer_id,word_answer.id,:checked =>true%>
                    <%=f2.label :word_answer_id,word_answer.content%>        
                  <%end%>                                         
              </div>
            </div>
          </div>     
        </div>   
      <%end%>              
      <%= label_tag "Next","Next",id:"btnNext",class:"button btn btn-primary" %>    
      <%=f.submit "Submit",id:"btnSubmit",class:"btn btn-primary"%>   
    <%end %>    

    <script type="text/javascript">
    var num=1; 
      hide_word();      
      $("#btnSubmit").hide();      
      $(".button").on("click", function(){          
        $("#word-"+num).hide();
        $("#word-"+(num+1)).show();
        num+=1;
        if(num><%=@lesson.lesson_words.count%>){          
          $("#word-"+(num-1)).show();
          $("#btnNext").hide();
          $("#btnSubmit").show();
        }
      }); 

      function hide_word(){
        for(var i=2;i<=<%=@lesson.lesson_words.count%>;i++){
          $("#word-"+i).hide();
        }  
      }
  </script>